<div class="rutina-container">
  <h2>Crear Rutina</h2>

  <!-- Nombre de la rutina -->
  <div class="form-group">
    <label for="nombreRutina">Nombre de la Rutina</label>
    <input type="text" id="nombreRutina" [(ngModel)]="nombreRutina" placeholder="Ingresa el nombre de la rutina">
  </div>

  <!-- SelecciÃ³n de ejercicios -->
  <div class="form-group d-flex align-items-center">
    <select id="ejercicioSelect" [(ngModel)]="ejercicioSeleccionado" (change)="onSelectChange()"
      class="form-select me-2">
      <option *ngFor="let ejercicio of ejercicios" [ngValue]="ejercicio">
        {{ ejercicio.nombre }}
      </option>
    </select>

    <button class="btn btn-secondary" (click)="abrirModal()">
      Agregar Ejercicio
    </button>
  </div>


  <!-- Formulario de repeticiones y series -->
  <div *ngIf="ejercicioSeleccionado" class="form-ejercicio">
    <h3>{{ ejercicioSeleccionado?.nombre }}</h3>
    <div class="form-group">
      <label for="series">Series</label>
      <input type="number" id="series" [(ngModel)]="series" min="1" class="form-control">
    </div>
    <div class="form-group">
      <label for="repeticiones">Repeticiones</label>
      <input type="number" id="repeticiones" [(ngModel)]="repeticiones" min="1" class="form-control">
    </div>
    <button class="btn btn-primary mt-2" (click)="agregarAlaRutina()">Agregar a la Rutina</button>
  </div>

  <!-- Mostrar rutina -->
  <div *ngIf="rutina.length > 0" class="rutina-lista">
    <!--h3>Rutina: {{ nombreRutina }}</h3-->
    <ul>
      <li *ngFor="let item of rutina; let i = index">
        {{ item.ejercicio.nombre }} - {{ item.series }} series x {{ item.repeticiones }} repeticiones
        <button class="btn btn-danger btn-sm ms-2" (click)="eliminarEjercicio(i)">Eliminar</button>
      </li>
    </ul>
    <button class="btn btn-success mt-2" (click)="guardarRutina()">Guardar Rutina</button>
  </div>

  <!-- Modal Bootstrap -->
  <div class="modal" tabindex="-1" [ngClass]="{'show d-block': mostrarModal}" style="background: rgba(0,0,0,0.5);">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Agregar Nuevo Ejercicio</h5>
          <button type="button" class="btn-close" (click)="cerrarModal()"></button>
        </div>
        <div class="modal-body">
          <input type="text" [(ngModel)]="nuevoEjercicio" placeholder="Nombre del ejercicio" class="form-control">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="cerrarModal()">Cancelar</button>
          <button type="button" class="btn btn-primary" (click)="guardarNuevoEjercicio()">Guardar</button>
        </div>
      </div>
    </div>
  </div>
</div>